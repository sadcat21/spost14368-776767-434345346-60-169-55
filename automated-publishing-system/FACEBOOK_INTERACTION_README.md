# ูุธุงู ุชูุงุนู ููุณุจูู (Facebook Interaction System)

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงูููููุงุช ุงูุฑุฆูุณูุฉ](#ุงูููููุงุช-ุงูุฑุฆูุณูุฉ)
3. [ูููู ุงููุธุงู](#ูููู-ุงููุธุงู)
4. [ุขููุฉ ุงูุนูู ุงูุชูุตูููุฉ](#ุขููุฉ-ุงูุนูู-ุงูุชูุตูููุฉ)
5. [ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช](#ุฅุฏุงุฑุฉ-ุงูุชุนูููุงุช)
6. [ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู](#ุฅุฏุงุฑุฉ-ุงูุฑุณุงุฆู)
7. [ุงูุชูุงูู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู](#ุงูุชูุงูู-ูุน-ุงูุฐูุงุก-ุงูุงุตุทูุงุนู)
8. [ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช](#ูุงุฌูุงุช-ุจุฑูุฌุฉ-ุงูุชุทุจููุงุช)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

### ูุนูููุงุช ุงููููู

- **ุงูุฑูุฒ ูู ุงูููุฏ**: `facebook-interaction`
- **ุงุณู ุงููููู**: ุชูุงุนู ููุณุจูู (FacebookInteraction)
- **ุงููุตู**: ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช ูุงูุฑุณุงุฆู ุนูู ุตูุญุงุช ููุณุจูู
- **ุงูููุน**: ุชุจููุจ ุฑุฆูุณู
- **ุงูุฃููููุฉ**: MessageCircle
- **ุงูุชุตููู**: FB (Facebook)
- **ุงููุณุงุฑ**: `src/components/FacebookInteraction.tsx`

### ุงูุบุฑุถ ูู ุงููุธุงู

ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูุชูุงุนู ูุน ุงููุณุชุฎุฏููู ุนูู ููุณุจููุ ูุชูุญ:
- ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช ุนูู ุงูููุดูุฑุงุช
- ุฅุฏุงุฑุฉ ุฑุณุงุฆู Messenger
- ุงูุฑุฏ ุงูุชููุงุฆู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุชุตููู ุงูุชุนูููุงุช ุฐููุงู
- ุชุญููู ุงููุดุงุนุฑ ูุงูููุงูุง

---

## ๐งฉ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงููููู ุงูุฑุฆูุณู (FacebookInteraction.tsx)

**ุงููููุน**: `src/components/FacebookInteraction.tsx`

**ุงููุณุคูููุงุช**:
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุงุชุตุงู ุจููุณุจูู
- ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุงูุตูุญุฉ ุงููุดุทุฉ
- ุงูุชูุณูู ุจูู ููููุงุช ุงูุชุนูููุงุช ูุงูุฑุณุงุฆู
- ุฅุฏุงุฑุฉ ุงูุชุจููุจุงุช ูุงูุงูุชูุงู ุจูููุง

**ุงูุญุงูุงุช (States)**:
```typescript
const [isConnected, setIsConnected] = useState(false);        // ุญุงูุฉ ุงูุงุชุตุงู
const [selectedPage, setSelectedPage] = useState<FacebookPage | null>(null);  // ุงูุตูุญุฉ ุงููุฎุชุงุฑุฉ
const [userAccessToken, setUserAccessToken] = useState("");   // ุชููู ุงููุณุชุฎุฏู
```

**ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ**:

#### 1.1 ุงูุชุญูู ูู ุงูุงุชุตุงู ุนูุฏ ุงูุชุญููู
```typescript
useEffect(() => {
  // ุฌูุจ ุงูุชููู ุงููุญููุธ ูู localStorage
  const savedToken = localStorage.getItem("facebook_user_token");
  const savedPages = localStorage.getItem("facebook_pages");
  const savedSelectedPage = localStorage.getItem("facebook_selected_page");
  
  if (savedToken && savedPages) {
    setUserAccessToken(savedToken);
    setIsConnected(true);
    // ุงุณุชุฑุฌุงุน ุงูุตูุญุฉ ุงููุฎุชุงุฑุฉ ุณุงุจูุงู
    if (savedSelectedPage) {
      const foundPage = parsedPages.find((p) => p.id === savedSelectedPage);
      if (foundPage) setSelectedPage(foundPage);
    }
  }
}, []);
```

#### 1.2 ุงุฎุชูุงุฑ ุงูุตูุญุฉ
```typescript
const handlePageSelect = (page: FacebookPage) => {
  setSelectedPage(page);
  localStorage.setItem("facebook_selected_page", page.id);
  toast.success("ุชู ุงุฎุชูุงุฑ ุงูุตูุญุฉ ุจูุฌุงุญ");
};
```

#### 1.3 ูุทุน ุงูุงุชุตุงู
```typescript
const disconnectFromFacebook = () => {
  setIsConnected(false);
  setSelectedPage(null);
  setUserAccessToken("");
  // ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุญููุธุฉ
  localStorage.removeItem("facebook_user_token");
  localStorage.removeItem("facebook_pages");
  localStorage.removeItem("facebook_selected_page");
  localStorage.removeItem("facebook_user_info");
  localStorage.removeItem("facebook_auth_method");
  toast.success("ุชู ูุทุน ุงูุงุชุตุงู ุจููุณุจูู");
};
```

---

### 2. ูููู ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช (CommentManager.tsx)

**ุงููููุน**: `src/components/FacebookManager/CommentManager.tsx`

**ุงููุณุคูููุงุช**:
- ุนุฑุถ ุงูููุดูุฑุงุช ูุงูุชุนูููุงุช
- ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช
- ุงูุชุตููู ุงูุฐูู ููุชุนูููุงุช
- ุงูุฑุฏ ุงูุชููุงุฆู
- ุชุญููู ุงูุตูุฑ ูู ุงูุชุนูููุงุช

**ุงูุญุงูุงุช ุงูุฑุฆูุณูุฉ**:
```typescript
const [comments, setComments] = useState<Comment[]>([]);
const [posts, setPosts] = useState<any[]>([]);
const [selectedPostId, setSelectedPostId] = useState("");
const [replyText, setReplyText] = useState("");
const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);
const [classifiedComments, setClassifiedComments] = useState<{[key: string]: any}>({});
const [hiddenComments, setHiddenComments] = useState<Set<string>>(new Set());
```

---

### 3. ูููู ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู (MessengerManager.tsx)

**ุงููููุน**: `src/components/FacebookManager/MessengerManager.tsx`

**ุงููุณุคูููุงุช**:
- ุนุฑุถ ุงููุญุงุฏุซุงุช
- ุนุฑุถ ุงูุฑุณุงุฆู ุฏุงุฎู ูู ูุญุงุฏุซุฉ
- ุฅุฑุณุงู ุฑุณุงุฆู ุฌุฏูุฏุฉ
- ุชูููุฏ ุฑุฏูุฏ ุฐููุฉ

**ุงูุญุงูุงุช ุงูุฑุฆูุณูุฉ**:
```typescript
const [conversations, setConversations] = useState<Conversation[]>([]);
const [selectedConversationId, setSelectedConversationId] = useState("");
const [messages, setMessages] = useState<Message[]>([]);
const [replyMessage, setReplyMessage] = useState("");
```

---

### 4. ูููู ุงุฎุชูุงุฑ ุงูุตูุญุฉ (PageSelector.tsx)

**ุงููููุน**: `src/components/FacebookManager/PageSelector.tsx`

**ุงููุณุคูููุงุช**:
- ุนุฑุถ ูุนูููุงุช ุงููุณุชุฎุฏู ุงููุชุตู
- ุนุฑุถ ูุงุฆูุฉ ุงูุตูุญุงุช ุงููุชุงุญุฉ
- ุชุญุฏูุฏ ุงูุตูุญุฉ ุงููุดุทุฉ
- ุชุญููู ุตูุฑ ุงูุตูุญุงุช

---

### 5. Hook ุฌูุจ ุงูุจูุงูุงุช (useFacebookData.ts)

**ุงููููุน**: `src/hooks/useFacebookData.ts`

**ุงููุณุคูููุงุช**:
- ุฌูุจ ุฅุญุตุงุฆูุงุช ุงูุตูุญุฉ
- ุฌูุจ ุงูููุดูุฑุงุช
- ุฌูุจ ุงูุฑุณุงุฆู ุบูุฑ ุงูููุฑูุกุฉ
- ุชุญุฏูุซ ุงูุจูุงูุงุช ุชููุงุฆูุงู

---

## ๐๏ธ ูููู ุงููุธุงู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              FacebookInteraction (ุงููููู ุงูุฑุฆูุณู)       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ   ุงูุชุญูู ูู ุงูุงุชุตุงู                               โ  โ
โ  โ   โโ localStorage check                           โ  โ
โ  โ   โโ ุชุญููู ุงูุจูุงูุงุช ุงููุญููุธุฉ                      โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                         โ                               โ
โ         โโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ              โ
โ         โ                                โ              โ
โ  โโโโโโโโผโโโโโโโโโ              โโโโโโโโโโผโโโโโโโโโ    โ
โ  โ PageSelector  โ              โ  User Info      โ    โ
โ  โ - ุนุฑุถ ุงูุตูุญุงุช โ              โ  - ูุนูููุงุช      โ    โ
โ  โ - ุงูุงุฎุชูุงุฑ    โ              โ    ุงููุณุชุฎุฏู     โ    โ
โ  โโโโโโโโฌโโโโโโโโโ              โโโโโโโโโโโโโโโโโโโ    โ
โ         โ                                               โ
โ  โโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
โ  โ           Tabs Component                      โ     โ
โ  โ  โโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ     โ     โ
โ  โ  โ   ุงูุชุนูููุงุช  โ    โ    ุงูุฑุณุงุฆู      โ     โ     โ
โ  โ  โโโโโโโโฌโโโโโโโโ    โโโโโโโโโโฌโโโโโโโโโ     โ     โ
โ  โโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโ     โ
โ            โ                    โ                      โ
โ     โโโโโโโโผโโโโโโโโโ    โโโโโโโโผโโโโโโโโโโโโ         โ
โ     โCommentManager โ    โMessengerManager  โ         โ
โ     โโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ๏ธ ุขููุฉ ุงูุนูู ุงูุชูุตูููุฉ

### ูุฑุญูุฉ 1: ุงูุชุญูู ูู ุงูุงุชุตุงู ูุงูุชููุฆุฉ

```mermaid
graph TD
    A[ุชุญููู ุงููููู] --> B{ุงูุชุญูู ูู localStorage}
    B -->|ููุฌุฏ ุชููู| C[ุชุญููู ุจูุงูุงุช ุงูุฌูุณุฉ]
    B -->|ูุง ููุฌุฏ ุชููู| D[ุนุฑุถ ุฑุณุงูุฉ ุงูุงุชุตุงู]
    C --> E[ุชุนููู ุญุงูุฉ ุงูุงุชุตุงู = true]
    E --> F[ุชุญููู ูุนูููุงุช ุงููุณุชุฎุฏู]
    F --> G[ุชุญููู ูุงุฆูุฉ ุงูุตูุญุงุช]
    G --> H[ุงุณุชุฑุฌุงุน ุงูุตูุญุฉ ุงููุฎุชุงุฑุฉ]
    H --> I[ุนุฑุถ ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ]
    D --> J[ุชูุฌูู ููุฅุนุฏุงุฏุงุช]
```

**ุงูุฎุทูุงุช ุงูุชูุตูููุฉ**:

1. **ูุญุต localStorage**:
   - ุงูุจุญุซ ุนู `facebook_user_token`
   - ุงูุจุญุซ ุนู `facebook_pages`
   - ุงูุจุญุซ ุนู `facebook_selected_page`

2. **ุชุญููู ุงูุจูุงูุงุช**:
   ```typescript
   const savedToken = localStorage.getItem("facebook_user_token");
   if (savedToken) {
     setUserAccessToken(savedToken);
     setIsConnected(true);
   }
   ```

3. **ุชุญููู ูุนูููุงุช ุงููุณุชุฎุฏู**:
   ```typescript
   const response = await fetch(
     `https://graph.facebook.com/v19.0/me?fields=id,name,email,picture&access_token=${accessToken}`
   );
   ```

4. **ุชุญููู ุงูุตูุญุงุช**:
   ```typescript
   const response = await fetch(
     `https://graph.facebook.com/v19.0/me/accounts?fields=id,name,category,access_token,picture&access_token=${accessToken}`
   );
   ```

---

### ูุฑุญูุฉ 2: ุงุฎุชูุงุฑ ุงูุตูุญุฉ

```mermaid
sequenceDiagram
    participant User as ุงููุณุชุฎุฏู
    participant PS as PageSelector
    participant FB as Facebook API
    participant LS as localStorage
    
    User->>PS: ุงุฎุชูุงุฑ ุตูุญุฉ
    PS->>PS: ุชุนููู ุงูุตูุญุฉ ุงููุฎุชุงุฑุฉ
    PS->>LS: ุญูุธ ูุนุฑู ุงูุตูุญุฉ
    PS->>User: toast: ุชู ุงูุงุฎุชูุงุฑ ุจูุฌุงุญ
    PS->>FB: ุฌูุจ ุฅุญุตุงุฆูุงุช ุงูุตูุญุฉ
    FB->>PS: ุฅุฑุฌุงุน ุงูุจูุงูุงุช
    PS->>User: ุนุฑุถ ูุนูููุงุช ุงูุตูุญุฉ
```

**ูุนูููุงุช ุงูุตูุญุฉ ุงููุญููุธุฉ**:
```typescript
interface FacebookPage {
  id: string;              // ูุนุฑู ุงูุตูุญุฉ
  name: string;            // ุงุณู ุงูุตูุญุฉ
  access_token: string;    // ุชููู ุงููุตูู ุงูุฎุงุต ุจุงูุตูุญุฉ
  category: string;        // ุชุตููู ุงูุตูุญุฉ
  picture?: {              // ุตูุฑุฉ ุงูุตูุญุฉ
    data: {
      url: string;
    };
  };
}
```

---

## ๐ ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช

### 1. ุชุญููู ุงูููุดูุฑุงุช

```mermaid
graph LR
    A[ุงุฎุชูุงุฑ ุตูุญุฉ] --> B[ุทูุจ API: ุฌูุจ ุงูููุดูุฑุงุช]
    B --> C[Facebook Graph API]
    C --> D{ูุฌุญ ุงูุทูุจุ}
    D -->|ูุนู| E[ุชุตููุฉ ุงูููุดูุฑุงุช ุงูุตุงูุญุฉ]
    D -->|ูุง| F[ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ]
    E --> G[ุนุฑุถ ูุงุฆูุฉ ุงูููุดูุฑุงุช]
    G --> H[ุงุฎุชูุงุฑ ููุดูุฑ]
    H --> I[ุชุญููู ุงูุชุนูููุงุช]
```

**API ุงููุณุชุฎุฏู**:
```typescript
const url = `https://graph.facebook.com/v18.0/${selectedPage.id}/posts?` +
  `access_token=${selectedPage.access_token}&` +
  `fields=id,message,created_time,full_picture,picture,attachments{media}&` +
  `limit=20`;
```

---

### 2. ุชุญููู ุงูุชุนูููุงุช

**ุฎุทูุงุช ุชุญููู ุงูุชุนูููุงุช**:

```mermaid
graph TD
    A[ุงุฎุชูุงุฑ ููุดูุฑ] --> B[ูุณุญ ุงูุชุนูููุงุช ุงูุณุงุจูุฉ]
    B --> C[ุทูุจ ุชุญููู ุชุนูููุงุช ุฌุฏูุฏุฉ]
    C --> D[Facebook Graph API]
    D --> E[ุชุตููุฉ ุงูุชุนูููุงุช ุงูุตุงูุญุฉ]
    E --> F{ุงูุชุตููู ุงูุชููุงุฆู ููุนูุ}
    F -->|ูุนู| G[ุชุตููู ุงูุชุนูููุงุช ุฐููุงู]
    F -->|ูุง| H[ุนุฑุถ ุงูุชุนูููุงุช]
    G --> H
    H --> I{ููุฌุฏ ุตูุญุฉ ุชุงููุฉุ}
    I -->|ูุนู| J[ุญูุธ ุฑุงุจุท next]
    I -->|ูุง| K[ููุงูุฉ ุงูุชุญููู]
```

**API ุฌูุจ ุงูุชุนูููุงุช**:
```typescript
const url = `https://graph.facebook.com/v19.0/${selectedPostId}/comments?` +
  `access_token=${selectedPage.access_token}&` +
  `fields=id,message,from{name,id},created_time,parent,like_count,comment_count,` +
  `reactions.summary(total_count),comments{id,message,from{name,id},created_time,like_count}&` +
  `limit=25&order=chronological`;
```

**ุดุฑูุท ูุจูู ุงูุชุนููู**:
```typescript
const isValidComment = 
  comment && comment.id &&                         // ูู ูุนุฑู
  comment.message && comment.message.trim() &&     // ูู ูุต
  comment.from && (comment.from.name || comment.from.id);  // ูู ูุงุชุจ
```

---

### 3. ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช

#### 3.1 ุงูุฑุฏ ุงููุฏูู

```mermaid
sequenceDiagram
    participant User as ุงููุณุชุฎุฏู
    participant CM as CommentManager
    participant FB as Facebook API
    
    User->>CM: ูุชุงุจุฉ ุฑุฏ
    User->>CM: ุถุบุท "ุฅุฑุณุงู"
    CM->>CM: ุงูุชุญูู ูู ุงููุต
    CM->>FB: POST /comment_id/comments
    FB->>CM: ูุชูุฌุฉ ุงูุฅุฑุณุงู
    alt ูุฌุญ
        CM->>User: toast: ุชู ุงูุฅุฑุณุงู
        CM->>CM: ุชุญุฏูุซ ูุงุฆูุฉ ุงูุชุนูููุงุช
    else ูุดู
        CM->>User: toast: ุฎุทุฃ ูู ุงูุฅุฑุณุงู
    end
```

**ููุฏ ุงูุฅุฑุณุงู**:
```typescript
const response = await fetch(
  `https://graph.facebook.com/v19.0/${commentId}/comments`,
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams({
      message: replyText,
      access_token: selectedPage.access_token
    })
  }
);
```

---

#### 3.2 ุงูุฑุฏ ุงูุชููุงุฆู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

```mermaid
graph TD
    A[ุชูุนูู ุงูุฑุฏ ุงูุชููุงุฆู] --> B[ูุญุต ุฏูุฑู ูู 30 ุซุงููุฉ]
    B --> C[ุฌูุจ ุชุนูููุงุช ุฌุฏูุฏุฉ]
    C --> D{ููุฌุฏ ุชุนูููุงุช ุฌุฏูุฏุฉุ}
    D -->|ูุง| B
    D -->|ูุนู| E[ููู ุชุนููู ุฌุฏูุฏ]
    E --> F[ุชุญููู ุงููุญุชูู ุจู Gemini]
    F --> G[ุชูููุฏ ุฑุฏ ุฐูู]
    G --> H[ุฅุฑุณุงู ุงูุฑุฏ ุชููุงุฆูุงู]
    H --> I[ุงูุชุธุงุฑ 3 ุซูุงู]
    I --> J{ููุฌุฏ ุชุนูููุงุช ุฃุฎุฑูุ}
    J -->|ูุนู| E
    J -->|ูุง| B
```

**ุขููุฉ ุนูู ุงูุฑุฏ ุงูุชููุงุฆู**:

1. **ุงููุญุต ุงูุฏูุฑู**:
```typescript
useEffect(() => {
  if (!autoReplyEnabled || !selectedPostId) return;
  
  const interval = setInterval(async () => {
    await loadCommentsAndCheckForNew();
  }, 30000); // ูู 30 ุซุงููุฉ
  
  return () => clearInterval(interval);
}, [autoReplyEnabled, selectedPostId]);
```

2. **ุงูุชุดุงู ุงูุชุนูููุงุช ุงูุฌุฏูุฏุฉ**:
```typescript
const currentCommentIds = comments.map(c => c.id);
const newUniqueComments = validComments.filter(comment => 
  !currentCommentIds.includes(comment.id) &&     // ุชุนููู ุฌุฏูุฏ
  comment.message &&                              // ูู ูุต
  (!comment.comment_count || comment.comment_count === 0)  // ููุณ ุฑุฏุงู
);
```

3. **ุชูููุฏ ุงูุฑุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู**:
```typescript
const prompt = `ุฃูุช ูุณุงุนุฏ ุฐูู ููุฑุฏ ุงูุชููุงุฆู ุนูู ุชุนูููุงุช ููุณุจูู.

ูุญุชูู ุงูููุดูุฑ:
${posts.find(post => post.id === selectedPostId)?.message || "ููุดูุฑ ุนูู ููุณุจูู"}

ุชุนููู ุงููุณุชุฎุฏู:
"${comment.message}"

ุฅุฑุดุงุฏุงุช:
- ุฑุฏ ูููุฏ ูููุฐุจ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ูู ูุฎุชุตุฑุงู (ุฃูู ูู 40 ูููุฉ)
- ุฅุฐุง ูุงู ุณุคุงูุงูุ ูุฏู ุฅุฌุงุจุฉ ูููุฏุฉ ุฃู ุงุทูุจ ุงูุชูุงุตู
- ุฅุฐุง ูุงู ุฅูุฌุงุจูุงูุ ุงุดูุฑู ุจุงุฎุชุตุงุฑ
- ุชุฌูุจ ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช ุงูุณูุจูุฉ ุฃู ุงูููุงุฌูุฉ`;
```

---

### 4. ุงูุชุตููู ุงูุฐูู ููุชุนูููุงุช

**ุฃููุงุน ุงูุชุตูููุงุช**:

```mermaid
graph TD
    A[ุชุนููู ุฌุฏูุฏ] --> B[ุชุญููู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู]
    B --> C{ููุน ุงูุชุนููู}
    C -->|ุณุคุงู| D[Question]
    C -->|ุดููู| E[Complaint]
    C -->|ุฅูุฌุงุจู| F[Positive]
    C -->|ุณูุจู| G[Negative]
    C -->|ูุญุงูุฏ| H[Neutral]
    C -->|ุทูุจ| I[Request]
    C -->|ุงุณุชูุณุงุฑ| J[Inquiry]
```

**ูุนูููุงุช ุงูุชุตููู**:
```typescript
interface Classification {
  type: string;          // ููุน ุงูุชุนููู
  sentiment: string;     // ุงููุดุงุนุฑ (positive/negative/neutral)
  priority: string;      // ุงูุฃููููุฉ (high/medium/low)
  suggestedReply: string;  // ุฑุฏ ููุชุฑุญ
  topics: string[];      // ุงูููุงุถูุน ุงููุฐููุฑุฉ
}
```

**ููุงุฆุฏ ุงูุชุตููู**:
- ุชุฑุชูุจ ุงูุชุนูููุงุช ุญุณุจ ุงูุฃููููุฉ
- ุฅุฎูุงุก ุงูุดูุงูู ุชููุงุฆูุงู
- ุชูููุฏ ุฑุฏูุฏ ููุงุณุจุฉ
- ุชุญููู ุงุชุฌุงูุงุช ุงูุฑุฃู

---

### 5. ุชุญููู ุงูุตูุฑ ูู ุงูุชุนูููุงุช

**ุนูุฏูุง ูุณุฃู ูุณุชุฎุฏู ุนู ุตูุฑุฉ**:

```mermaid
sequenceDiagram
    participant User as ุงููุณุชุฎุฏู
    participant CM as CommentManager
    participant Img as Image Analyzer
    participant AI as Gemini AI
    
    User->>CM: ุณุคุงู ุนู ุตูุฑุฉ
    CM->>CM: ูุดู ูููุงุช ููุชุงุญูุฉ
    CM->>Img: ุฌูุจ ุงูุตูุฑุฉ ูู ุงูููุดูุฑ
    Img->>Img: ุชุญููู ุฅูู base64
    Img->>AI: ุฅุฑุณุงู ุงูุตูุฑุฉ + ุงูุณุคุงู
    AI->>AI: ุชุญููู ุงูุตูุฑุฉ
    AI->>Img: ุฅุฑุฌุงุน ุงูุฅุฌุงุจุฉ
    Img->>CM: ุงููุต ุงููุณุชุฎุฑุฌ
    CM->>User: ุนุฑุถ ุงูุฑุฏ
```

**ุงููููุงุช ุงูููุชุงุญูุฉ ููุตูุฑ**:
```typescript
const imageRelatedKeywords = [
  'ุตูุฑุฉ', 'ุตูุฑู', 'ุงูุตูุฑุฉ', 'ูู ุงูุตูุฑุฉ', 'ุจุงูุตูุฑุฉ',
  'ููู', 'ุฃููุงู', 'ุงูููู', 'ุงูุฃููุงู',
  'ููุชูุจ', 'ูุต', 'ูููุฉ', 'ูููุงุช', 'ุนุจุงุฑุฉ',
  'ุดูู', 'ุฃุดูุงู', 'ูุธูุฑ', 'ููุฌูุฏ', 'ุฃุฑู', 'ุชุฑู',
  'ูุงุฐุง', 'ูุด', 'ุงูุด', 'ุดู', 'ุฃูู',
  'ุงูุฑุฃ', 'ุงูุฑุง', 'ูุฑุงุกุฉ'
];
```

**ุฏุงูุฉ ุชุญููู ุงูุตูุฑุฉ**:
```typescript
const analyzeImageForReply = async (
  imageUrl: string, 
  userQuestion: string, 
  postContent: string
) => {
  // 1. ุชุญููู ุงูุตูุฑุฉ ุฅูู base64
  const response = await fetch(imageUrl);
  const blob = await response.blob();
  const base64 = await convertToBase64(blob);
  
  // 2. ุฅุฑุณุงู ููุชุญููู
  const analysisResponse = await fetch(
    `${window.location.origin}/functions/v1/gemini-image-analysis`,
    {
      method: 'POST',
      body: JSON.stringify({
        imageData: base64,
        imageMimeType: blob.type,
        prompt: userQuestion,
        action: "answer",
        postContent: postContent
      })
    }
  );
  
  // 3. ุฅุฑุฌุงุน ุงููุชูุฌุฉ
  return result.text || result.analysis;
};
```

---

## ๐ฌ ุฅุฏุงุฑุฉ ุงูุฑุณุงุฆู

### 1. ุชุญููู ุงููุญุงุฏุซุงุช

```mermaid
graph LR
    A[ุงุฎุชูุงุฑ ุตูุญุฉ] --> B[ุทูุจ ุงููุญุงุฏุซุงุช]
    B --> C[Facebook Graph API]
    C --> D[ูุนุงูุฌุฉ ุงูุจูุงูุงุช]
    D --> E[ุนุฑุถ ูุงุฆูุฉ ุงููุญุงุฏุซุงุช]
    E --> F[ุนุฑุถ ุนุฏุฏ ุงูุฑุณุงุฆู]
    F --> G[ุชุฑุชูุจ ุญุณุจ ุงูุชุญุฏูุซ]
```

**API ุงููุณุชุฎุฏู**:
```typescript
const url = `https://graph.facebook.com/v18.0/${selectedPage.id}/conversations?` +
  `access_token=${selectedPage.access_token}&` +
  `fields=participants,updated_time,message_count&` +
  `limit=20`;
```

---

### 2. ุนุฑุถ ุงูุฑุณุงุฆู

**ุฎุทูุงุช ุนุฑุถ ุงููุญุงุฏุซุฉ**:

```mermaid
sequenceDiagram
    participant User as ุงููุณุชุฎุฏู
    participant MM as MessengerManager
    participant FB as Facebook API
    
    User->>MM: ุงุฎุชูุงุฑ ูุญุงุฏุซุฉ
    MM->>MM: ุชุนููู conversationId
    MM->>FB: GET /{conversationId}/messages
    FB->>MM: ูุงุฆูุฉ ุงูุฑุณุงุฆู
    MM->>MM: ุชุฑุชูุจ ุฒููู
    MM->>User: ุนุฑุถ ุงููุญุงุฏุซุฉ
```

**ูุนุงูุฌุฉ ุงูุฑุณุงุฆู**:
```typescript
// ุชุฑุชูุจ ุงูุฑุณุงุฆู ูู ุงูุฃูุฏู ููุฃุญุฏุซ
const sortedMessages = (data.data || []).sort((a, b) => 
  new Date(a.created_time).getTime() - new Date(b.created_time).getTime()
);

// ุชูููุฒ ุฑุณุงุฆู ุงูุตูุญุฉ ูู ุฑุณุงุฆู ุงููุณุชุฎุฏู
const isFromPage = (message) => message.from.id === selectedPage.id;
```

---

### 3. ุฅุฑุณุงู ุงูุฑุณุงุฆู

```mermaid
graph TD
    A[ูุชุงุจุฉ ุฑุณุงูุฉ] --> B{ุงูุชุญูู ูู ุงููุต}
    B -->|ูุงุฑุบ| C[ุนุฑุถ ุฎุทุฃ]
    B -->|ุตุงูุญ| D[ุงุณุชุฎุฑุงุฌ ูุนุฑู ุงููุณุชูู]
    D --> E[ุฅุฑุณุงู ุนุจุฑ API]
    E --> F{ูุฌุญ ุงูุฅุฑุณุงูุ}
    F -->|ูุนู| G[ุชุญุฏูุซ ูุงุฌูุฉ ุงููุญุงุฏุซุฉ]
    F -->|ูุง| H[ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ]
    G --> I[ูุณุญ ุญูู ุงูุฅุฏุฎุงู]
```

**ููุฏ ุงูุฅุฑุณุงู**:
```typescript
const recipient = conversation.participants.data.find(
  p => p.id !== selectedPage.id
);

const response = await fetch(
  `https://graph.facebook.com/v18.0/me/messages`,
  {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      recipient: { id: recipient.id },
      message: { text: replyMessage },
      access_token: selectedPage.access_token
    })
  }
);
```

---

### 4. ุงูุฑุฏ ุงูุฐูู ุนูู ุงูุฑุณุงุฆู

```mermaid
graph LR
    A[ุถุบุท ุฒุฑ ุงูุฑุฏ ุงูุฐูู] --> B[ุงุณุชุฎุฑุงุฌ ุขุฎุฑ ุฑุณุงูุฉ]
    B --> C[ุฅุฑุณุงู ูู Gemini AI]
    C --> D[ุชูููุฏ ุฑุฏ ุงุญุชุฑุงูู]
    D --> E[ููุก ุญูู ุงูุฅุฏุฎุงู]
    E --> F[ุงููุณุชุฎุฏู ูุฑุงุฌุน]
    F --> G[ุฅุฑุณุงู ุฃู ุชุนุฏูู]
```

**Prompt ุงูุฑุฏ ุงูุฐูู**:
```typescript
const prompt = `ุงูุชุจ ุฑุฏุงู ุงุญุชุฑุงููุงู ูููุฐุจุงู ุนูู ูุฐู ุงูุฑุณุงูุฉ ูู ุนููู 
ูู ุตูุญุฉ ุฃุนูุงู ุนูู ููุณุจูู. ูุฌุจ ุฃู ูููู ุงูุฑุฏ ุจุงููุบุฉ ุงูุนุฑุจูุฉุ 
ูุฎุชุตุฑุ ูุฏูุฏ ููููุฏ ูุฎุฏูุฉ ุงูุนููุงุก:

"${lastMessage}"

ุงูุฑุฏ ูุฌุจ ุฃู ูููู ููุงุณุจ ูุฎุฏูุฉ ุงูุนููุงุก ุงูุชุฌุงุฑูุฉ ูุฃู ูุญุงูุธ 
ุนูู ุงูุนูุงูุฉ ุงูุฅูุฌุงุจูุฉ ูุน ุงูุนููู.`;
```

---

## ๐ค ุงูุชูุงูู ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู

### Gemini API

**ุงูุฎุฏูุงุช ุงููุณุชุฎุฏูุฉ**:

1. **ุชูููุฏ ุงูุฑุฏูุฏ**:
   - Model: `gemini-2.0-flash`
   - Temperature: 0.7
   - Max Tokens: 100-300

2. **ุชุญููู ุงูุตูุฑ**:
   - Edge Function: `gemini-image-analysis`
   - ูุฏุนู: JPEG, PNG, WebP, GIF

3. **ุงูุชุตููู**:
   - ุชุญููู ุงููุดุงุนุฑ
   - ุชุญุฏูุฏ ุงูููุงูุง
   - ุงุณุชุฎุฑุงุฌ ุงูููุงุถูุน

**ุฅุนุฏุงุฏุงุช API**:
```typescript
const config = {
  generationConfig: {
    temperature: 0.7,
    topK: 40,
    topP: 0.95,
    maxOutputTokens: 300,
  }
};
```

---

## ๐ ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช

### Facebook Graph API

**ุงูุฅุตุฏุงุฑ ุงููุณุชุฎุฏู**: v18.0 / v19.0

#### 1. ุฌูุจ ูุนูููุงุช ุงููุณุชุฎุฏู
```
GET https://graph.facebook.com/v19.0/me
?fields=id,name,email,picture
&access_token={token}
```

#### 2. ุฌูุจ ุงูุตูุญุงุช
```
GET https://graph.facebook.com/v19.0/me/accounts
?fields=id,name,category,access_token,picture
&access_token={token}
```

#### 3. ุฌูุจ ุงูููุดูุฑุงุช
```
GET https://graph.facebook.com/v18.0/{page_id}/posts
?fields=id,message,created_time,full_picture,attachments{media}
&limit=20
&access_token={token}
```

#### 4. ุฌูุจ ุงูุชุนูููุงุช
```
GET https://graph.facebook.com/v19.0/{post_id}/comments
?fields=id,message,from{name,id},created_time,parent,
        like_count,comment_count,reactions.summary(total_count),
        comments{id,message,from,created_time}
&limit=25
&order=chronological
&access_token={token}
```

#### 5. ุงูุฑุฏ ุนูู ุชุนููู
```
POST https://graph.facebook.com/v19.0/{comment_id}/comments
Content-Type: application/x-www-form-urlencoded

message={reply_text}
&access_token={token}
```

#### 6. ุฌูุจ ุงููุญุงุฏุซุงุช
```
GET https://graph.facebook.com/v18.0/{page_id}/conversations
?fields=participants,updated_time,message_count
&limit=20
&access_token={token}
```

#### 7. ุฌูุจ ุฑุณุงุฆู ูุญุงุฏุซุฉ
```
GET https://graph.facebook.com/v18.0/{conversation_id}/messages
?fields=id,message,from,created_time,to
&limit=20
&access_token={token}
```

#### 8. ุฅุฑุณุงู ุฑุณุงูุฉ
```
POST https://graph.facebook.com/v18.0/me/messages
Content-Type: application/json

{
  "recipient": { "id": "{user_id}" },
  "message": { "text": "{message_text}" },
  "access_token": "{token}"
}
```

---

## ๐พ ุงูุชุฎุฒูู ุงููุญูู (localStorage)

**ุงูููุงุชูุญ ุงููุณุชุฎุฏูุฉ**:

```typescript
// ุชููู ุงููุณุชุฎุฏู
localStorage.setItem("facebook_user_token", token);

// ูุงุฆูุฉ ุงูุตูุญุงุช
localStorage.setItem("facebook_pages", JSON.stringify(pages));

// ุงูุตูุญุฉ ุงููุฎุชุงุฑุฉ
localStorage.setItem("facebook_selected_page", pageId);

// ูุนูููุงุช ุงููุณุชุฎุฏู
localStorage.setItem("facebook_user_info", JSON.stringify(userInfo));

// ุทุฑููุฉ ุงููุตุงุฏูุฉ
localStorage.setItem("facebook_auth_method", method);

// ููุชุงุญ Gemini AI
localStorage.setItem("gemini-api-key", apiKey);
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูููู ุงูุชุจููุจุงุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         FacebookInteraction                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ค ูุนูููุงุช ุงููุณุชุฎุฏู                        โ
โ  ๐ PageSelector - ุงุฎุชูุงุฑ ุงูุตูุญุฉ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ ๐ฌ ุงูุชุนูููุงุช โ ๐จ ุงูุฑุณุงุฆู            โ  โ
โ  โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                             โ
โ  [ูุญุชูู ุงูุชุจููุจ ุงููุดุท]                      โ
โ                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุชุจููุจ ุงูุชุนูููุงุช

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  CommentManager                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุงุฎุชูุงุฑ ููุดูุฑ                           โ
โ  ๐ ุงูุจุญุซ ูู ุงูุชุนูููุงุช                     โ
โ  โ๏ธ  ุชุตููู ุชููุงุฆู | ุฑุฏ ุชููุงุฆู             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ูุงุฆูุฉ ุงูุชุนูููุงุช:                       โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ   โ ๐ค ุงุณู ุงููุณุชุฎุฏู                    โ   โ
โ   โ ๐ฌ ูุต ุงูุชุนููู                      โ   โ
โ   โ ๐ท๏ธ ุงูุชุตููู | โญ ุงูุฃููููุฉ           โ   โ
โ   โ [๐ฌ ุฑุฏ] [๐ค ุฑุฏ ุฐูู] [๐ ุชุญููู]     โ   โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุชุจููุจ ุงูุฑุณุงุฆู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  MessengerManager                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุงููุญุงุฏุซุงุช    โ  ๐ฌ ุงูุฑุณุงุฆู             โ
โ  โโโโโโโโโโโโ    โ  โโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ ๐ค ูุญูุฏ  โ    โ  โ ุฃูุช: ูุฑุญุจุงู        โ โ
โ  โ ๐ค ุฃุญูุฏ  โ    โ  โ ูุญูุฏ: ุดูุฑุงู        โ โ
โ  โ ๐ค ูุงุทูุฉ โ    โ  โ ุฃูุช: ุงูุนูู         โ โ
โ  โโโโโโโโโโโโ    โ  โโโโโโโโโโโโโโโโโโโโโโ โ
โ                  โ  [๐ค ุฑุฏ ุฐูู]           โ
โ                  โ  [________________] ๐ค  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุชุฏูู ุงูุจูุงูุงุช

```mermaid
graph TB
    subgraph "ุงููุณุชุฎุฏู"
        U[ุงููุณุชุฎุฏู]
    end
    
    subgraph "ุงููููู ุงูุฑุฆูุณู"
        FI[FacebookInteraction]
    end
    
    subgraph "ุงูููููุงุช ุงููุฑุนูุฉ"
        PS[PageSelector]
        CM[CommentManager]
        MM[MessengerManager]
    end
    
    subgraph "ุงูุฎุฏูุงุช"
        FB[Facebook API]
        AI[Gemini AI]
        LS[localStorage]
    end
    
    U -->|ุชูุงุนู| FI
    FI -->|ุนุฑุถ| PS
    FI -->|ุนุฑุถ| CM
    FI -->|ุนุฑุถ| MM
    
    PS <-->|ุฌูุจ ุตูุญุงุช| FB
    CM <-->|ุฌูุจ/ุฅุฑุณุงู ุชุนูููุงุช| FB
    MM <-->|ุฌูุจ/ุฅุฑุณุงู ุฑุณุงุฆู| FB
    
    CM <-->|ุชูููุฏ ุฑุฏูุฏ| AI
    MM <-->|ุชูููุฏ ุฑุฏูุฏ| AI
    
    FI <-->|ุญูุธ/ุฌูุจ| LS
    PS <-->|ุญูุธ/ุฌูุจ| LS
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูููุงููุณ

### ูุคุดุฑุงุช ุงูุฃุฏุงุก

- **ุฒูู ุชุญููู ุงูุชุนูููุงุช**: 1-3 ุซูุงูู
- **ุฒูู ุชูููุฏ ุฑุฏ ุฐูู**: 2-5 ุซูุงูู
- **ูุนุฏู ูุฌุงุญ ุงูุชุตููู**: >90%
- **ุฏูุฉ ุงูุฑุฏูุฏ ุงูุชููุงุฆูุฉ**: >85%

### ูุนุฏูุงุช ุงูุงุณุชุฎุฏุงู

- **ูุญุต ุงูุชุนูููุงุช ุงูุฌุฏูุฏุฉ**: ูู 30 ุซุงููุฉ (ุนูุฏ ุชูุนูู ุงูุฑุฏ ุงูุชููุงุฆู)
- **ุญุฏ ุงูุชุญููู**: 
  - ุงูููุดูุฑุงุช: 20 ููู ุทูุจ
  - ุงูุชุนูููุงุช: 25 ููู ุทูุจ
  - ุงูุฑุณุงุฆู: 20 ููู ุทูุจ
  - ุงููุญุงุฏุซุงุช: 20 ููู ุทูุจ

---

## ๐ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. ุงูุชุญููู ุงูุชุฏุฑูุฌู (Pagination)
- ุฏุนู ุชุญููู ุงููุฒูุฏ ูู ุงูุชุนูููุงุช
- ุชุชุจุน ุฑูุงุจุท `next` ูู Facebook API
- ุฒุฑ "ุชุญููู ุงููุฒูุฏ" ุฏููุงูููู

### 2. ุงูุชุตููุฉ ูุงูุชุฑุชูุจ
- ุชุฑุชูุจ ุญุณุจ: ุงูุฃุญุฏุซุ ุงูุฃูุฏูุ ุงูุฃูุซุฑ ุชูุงุนูุงู
- ุชุตููุฉ ุญุณุจ ุงูููุน: ุงูููุ ุฃุณุฆูุฉุ ุดูุงููุ ุฅูุฌุงุจูุฉ
- ุงูุจุญุซ ุจุงููููุงุช ุงูููุชุงุญูุฉ

### 3. ุฅุฏุงุฑุฉ ุงูุดูุงูู
- ุฅุฎูุงุก ุงูุชุนูููุงุช ุชููุงุฆูุงู
- ูุถุน ุนูุงูุฉ ุนูู ุงูุชุนูููุงุช ุงูุญุณุงุณุฉ
- ุฅุดุนุงุฑุงุช ุงูุฃููููุฉ ุงูุนุงููุฉ

### 4. ุงูุชูุงูู ูุน ุงูุฃุญุฏุงุซ
- `window.addEventListener('refreshFacebookData')` ูุชุญุฏูุซ ุงูุจูุงูุงุช
- `window.addEventListener('hideComment')` ูุฅุฎูุงุก ุงูุชุนูููุงุช
- ูุฒุงููุฉ ุชููุงุฆูุฉ ุนูุฏ ุชุบููุฑ ุงูุชุจููุจุงุช

---

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุญูุงูุฉ ุงูุชูููุงุช
- ุชุฎุฒูู ุขูู ูู `localStorage`
- ุนุฏู ุฅุฑุณุงู ุงูุชูููุงุช ูู ุงูู URL
- ุชูุธูู ุงูุจูุงูุงุช ุนูุฏ ูุทุน ุงูุงุชุตุงู

### ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- ูุญุต ุตูุงุญูุงุช ุงููุตูู ููู ุตูุญุฉ
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุฅุฑุณุงู ุงูุฑุณุงุฆู

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุงูุชุนุงูู ูุน ุฃุฎุทุงุก API ุจุดูู ุขูู
- ุนุฏู ูุดู ูุนูููุงุช ุญุณุงุณุฉ ูู ุฑุณุงุฆู ุงูุฎุทุฃ
- ุชุณุฌูู ุงูุฃุฎุทุงุก ููุชุญููู (console.error)

---

## ๐๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดุงูู ุงูุดุงุฆุนุฉ

#### 1. "Invalid OAuth access token"
**ุงูุณุจุจ**: ุงูุชููู ููุชูู ุงูุตูุงุญูุฉ ุฃู ุบูุฑ ุตุญูุญ
**ุงูุญู**: 
- ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุจููุณุจูู
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงูุชุทุจูู
- ุทูุจ ุชููู ุฌุฏูุฏ

#### 2. "ูุง ุชูุฌุฏ ุตูุญุงุช ูุชุงุญุฉ"
**ุงูุณุจุจ**: ุงููุณุชุฎุฏู ููุณ admin ูุฃู ุตูุญุฉ
**ุงูุญู**:
- ุงูุชุญูู ูู ุฏูุฑ ุงููุณุชุฎุฏู ูู ุงูุตูุญุงุช
- ุทูุจ ุตูุงุญูุงุช `pages_show_list`

#### 3. "ูุดู ูู ุชุญููู ุงูุชุนูููุงุช"
**ุงูุณุจุจ**: ูุดููุฉ ูู ุงูุงุชุตุงู ุฃู ุงูุตูุงุญูุงุช
**ุงูุญู**:
- ุงูุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุงูุชุฃูุฏ ูู ุตูุงุญูุงุช `pages_read_engagement`

#### 4. "ูุดู ูู ุฅุฑุณุงู ุงูุฑุฏ"
**ุงูุณุจุจ**: ุตูุงุญูุงุช ุบูุฑ ูุงููุฉ
**ุงูุญู**:
- ุงูุชุญูู ูู ุตูุงุญูุงุช `pages_manage_engagement`
- ุงูุชุฃูุฏ ูู ุฃู ุงูุชููู ุงูุฎุงุต ุจุงูุตูุญุฉ ุตุญูุญ

---

## ๐ ุงูููุงุฑุฏ ูุงููุฑุงุฌุน

### Facebook Graph API Documentation
- [Graph API Overview](https://developers.facebook.com/docs/graph-api/overview)
- [Pages API](https://developers.facebook.com/docs/pages-api)
- [Messenger Platform](https://developers.facebook.com/docs/messenger-platform)

### Gemini AI Documentation
- [Gemini API Reference](https://ai.google.dev/docs)
- [Vision API](https://ai.google.dev/docs/vision)

### React & TypeScript
- [React Hooks](https://react.dev/reference/react)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)

---

## ๐ฎ ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ

### ุงููุฎุทุท ููุง
1. **ุชุญูููุงุช ูุชูุฏูุฉ**:
   - ููุญุฉ ุชุญูู ุงูุฅุญุตุงุฆูุงุช
   - ุชูุงุฑูุฑ ุงูุชูุงุนู ุงูุดูุฑูุฉ
   - ุฑุณูู ุจูุงููุฉ ูููุดุงุนุฑ

2. **ุฑุฏูุฏ ุฃูุซุฑ ุฐูุงุกู**:
   - ุชุนูู ูู ุงูุฑุฏูุฏ ุงูุณุงุจูุฉ
   - ุงูุชุฑุงุญุงุช ุดุฎุตูุฉ
   - ุฏุนู ุงููุบุงุช ุงููุชุนุฏุฏุฉ

3. **ุฃุชูุชุฉ ุฃูุซุฑ**:
   - ุฌุฏููุฉ ุงูุฑุฏูุฏ
   - ููุงุนุฏ ุงูุฑุฏ ุงูุชููุงุฆู
   - ุชุตุนูุฏ ุงููุดุงูู ุงูุนุงุฌูุฉ

4. **ุชูุงูู ุฃูุณุน**:
   - Instagram DM
   - WhatsApp Business
   - Twitter/X

---

## ๐ฅ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ููุญุตูู ุนูู ูุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
1. ูุฑุงุฌุนุฉ ูุฐุง ุงูุฏููู
2. ูุญุต console logs ูู ุงููุชุตูุญ
3. ุงูุชุญูู ูู ุตูุงุญูุงุช ููุณุจูู
4. ุงูุงุชุตุงู ุจูุฑูู ุงูุฏุนู

---

**ุขุฎุฑ ุชุญุฏูุซ**: 2025-01-21  
**ุงูุฅุตุฏุงุฑ**: 2.0  
**ุงูุญุงูุฉ**: ูุดุท ูููุฏ ุงูุชุทููุฑ ุงููุณุชูุฑ
